# Computer Vision projects
Мини-проекты во время стажировки в компании Цифра и изучения библиотеки OpenCV.
## Object tracking
Трекинг объекта на видео без использования машинного обучения. Я экспериментировала с чашкой на видео. Для начала нужно было научиться детектировать объект, перебрала следующие варианты:

1) Фукнция cv2.matchTemplate() ищет сходство шаблона с участками картинки, можно задавать порог (чувствительность), с которого объекты считаются одинаковыми. Хорошо работает для поиска идентичных шаблону участков на картинке, при малом изменении искомого объекта (из-за угла съёмки, например) алгоритм поиска работает плохо. Подробнее с вариацией методов функции на примерах [здесь](https://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_imgproc/py_template_matching/py_template_matching.html).

2) Иногда при поиске определённого объекта можно цепляться за формы. Например, на этой картинке можно научиться находить круг на дне чашки, но у меня возникли проблемы с устойчивостью. На видео во время движения кружки меняется угол освещения, и круг на донышке находится с сильными перебоями.

![example](https://github.com/molotkova/computer-vision/blob/master/git_rnd.jpg)

3) Поиск по цвету. Этот метод показал себя лучше всего в смысле устойчивости, и в итоге именно он был реализован. Алгоритм: чтение изображения и перегон в палитру HSV (эффективна для работы с цветом) -> нахождение участков, содержащих цвет в переделах установленных границ (в примере с синей чашкой использую границы (110, 0, 0) - (120, 255, 255)), выделение контуров -> выбор самого длинного контура - это и есть искомый объект, выделяю его в красный бокс.

Трекинг и измерение расстояний.

С помощью cv2.getPerspectiveTransform() делаю преобразование координатной сетки на выделенном участке с учётом перспективы для корректного измерения расстояний (уменьшаю искажения, связанные с разной удалённостью точек от камеры). Также преобразую координаты центра бокса.

Дальше калибрую камеру по нижней грани доски на заднем плане. Калибровка - это "правило" перевода длины из числа пикселей в см. Калиброваться можно по любому предмету известной длины, хорошо видном на видео, если камера зафиксирована, достаточно это сделать один раз.

P.S. длины на видео - это расстояния от центра красного бокса до границ верхней, правой, нижней и левой граней жёлтой области.
